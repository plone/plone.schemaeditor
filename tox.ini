# Generated from:
# https://github.com/plone/meta/tree/master/config/default
[tox]
envlist =
    format
    lint

[testenv]
py_files = git ls-files "*.py"
text_files = git ls-files "*.rst" "*.md"
allowlist_externals =
    sh

[testenv:format]
description = automatically reformat python code
skip_install = true
deps =
    pyupgrade
    isort
    black
    -c lint-requirements.txt
commands =
    sh -c '{[testenv]py_files} | xargs pyupgrade --py38-plus'
    sh -c '{[testenv]py_files} | xargs isort'
    sh -c '{[testenv]py_files} | xargs black'

[testenv:lint]
description = run linters that will help improve the code style
skip_install = true
deps =
    flake8
    codespell
    check-manifest
    -c lint-requirements.txt
commands =
    sh -c '{[testenv]py_files} | xargs flake8'
    sh -c '{[testenv]py_files} | xargs codespell'
    sh -c '{[testenv]text_files} | xargs codespell'
    check-manifest
